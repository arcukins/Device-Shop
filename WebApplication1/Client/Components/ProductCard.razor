@using WebApplication1.Shared.Models;

<div class="productCard">
    @if(this.HasDiscount)
	{
        <div class="saleBadge">
            <span class="saleLabel">SALE</span>
        </div>
	}
    <div class="productImage">
        <img src="@this.Product.ImageUrl" />
    </div>
    <div>
        <NavLink href="counter">
            <div class="productName">@this.Product.Name</div>
        </NavLink>
        <div class="productManufacturer">@this.Product.Manufacturer</div>
    </div>
    <div class="d-flex">
        @if(HasDiscount)
		{
            <div class="productReducedFromPrice">$ @this.Product.OriginalPrice</div>
		}
        
        <div class="productPrice">$ @this.Product.Price</div>
    </div>
    
    <div class="productActions">
        <NavLink class="addToCard" href="counter">
            <span>Add to cart</span>
        </NavLink>
        <NavLink class="readMore" href="@this.ProductUrl">
            <span>Read More</span>
        </NavLink>
    </div>
</div>

@code {
    [Parameter]
    public Product Product { get; set; }

    [Parameter]
    public EventCallback<Product> ProductChanged { get; set; }

    private bool HasDiscount;

    private string ProductUrl;

    protected override void OnInitialized()
    {
        this.HasDiscount = Product?.OriginalPrice - Product?.Price > 0;

        this.ProductUrl = $"product/{Product.UniqueName}";
    }
}
